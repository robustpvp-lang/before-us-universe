<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockade Runner</title>
    <style>
        html {
            height: 100%;
            width: 100%;
        }
        body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            background: black;
            color: #0ff;
            font-family: monospace;
            font-size: 16px;
        }
        #app {
            height: 100%;
            width: 100%;
            padding: 1rem;
            box-sizing: border-box;
        }
        .title-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            gap: 2rem;
        }
        .text-4xl {
            font-size: 2.5rem;
            font-weight: bold;
        }
        .text-2xl {
            font-size: 1.5rem;
        }
        .text-xl {
            font-size: 1.25rem;
        }
        .text-lg {
            font-size: 1.125rem;
        }
        .text-sm {
            font-size: 0.875rem;
        }
        .text-xs {
            font-size: 0.75rem;
        }
        .mb-4 {
            margin-bottom: 1rem;
        }
        .mb-6 {
            margin-bottom: 1.5rem;
        }
        .mb-8 {
            margin-bottom: 2rem;
        }
        .mt-8 {
            margin-top: 2rem;
        }
        .mt-12 {
            margin-top: 3rem;
        }
        .space-y-8 {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        .space-y-1 {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        .p-4 {
            padding: 1rem;
        }
        .border {
            border-width: 1px;
            border-style: solid;
        }
        .border-2 {
            border-width: 2px;
            border-style: solid;
        }
        .border-cyan-400 {
            border-color: #0ff;
        }
        .border-green-400 {
            border-color: #0f0;
        }
        .border-red-400, .border-red-500 {
            border-color: #f00;
        }
        .bg-white {
            background: #fff;
        }
        .text-black {
            color: #000;
        }
        .text-green-400 {
            color: #0f0;
        }
        .text-red-400, .text-red-500 {
            color: #f00;
        }
        .text-gray-400 {
            color: #aaa;
        }
        .hover-bg-cyan-400:hover {
            background: #0ff;
            color: black;
        }
        .hover-bg-green-400:hover {
            background: #0f0;
            color: black;
        }
        .hover-bg-red-400:hover {
            background: #f00;
            color: black;
        }
        .transition-all {
            transition: all 0.3s;
        }
        .grid {
            display: grid;
        }
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        .gap-4 {
            gap: 1rem;
        }
        .gap-2 {
            gap: 0.5rem;
        }
        .flex {
            display: flex;
        }
        .justify-center {
            justify-content: center;
        }
        .justify-between {
            justify-content: space-between;
        }
        .items-center {
            align-items: center;
        }
        .overflow-y-auto {
            overflow-y: auto;
        }
        .h-48 {
            height: 12rem;
        }
        .max-w-4xl {
            max-width: 64rem;
            margin: 0 auto;
        }
        .max-w-6xl {
            max-width: 80rem;
            margin: 0 auto;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .w-full {
            width: 100%;
        }
        .text-center {
            text-align: center;
        }
        .text-left {
            text-align: left;
        }
        .pl-4 {
            padding-left: 1rem;
        }
        .pb-3 {
            padding-bottom: 0.75rem;
        }
        .border-b {
            border-bottom-width: 1px;
            border-bottom-style: solid;
        }
        .border-opacity-30 {
            border-color: rgba(0, 255, 255, 0.3);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        @media (min-width: 768px) {
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
            .md\:grid-cols-4 {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
            .md\:col-span-2 {
                grid-column: span 2 / span 2;
            }
            .md\:text-4xl {
                font-size: 2.5rem;
            }
            .md\:text-2xl {
                font-size: 1.5rem;
            }
            .md\:text-xl {
                font-size: 1.25rem;
            }
            .md\:text-base {
                font-size: 1rem;
            }
            .md\:p-8 {
                padding: 2rem;
            }
            .md\:py-4 {
                padding-top: 1rem;
                padding-bottom: 1rem;
            }
            .md\:gap-8 {
                gap: 2rem;
            }
        }
        @media (min-width: 1024px) {
            .lg\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
        let gameState = 'title';
        let ship = {
            hull: 100,
            maxHull: 100,
            cargo: 50,
            maxCargo: 50,
            credits: 1000,
            weapons: 10
        };
        let currentPlanet = 'eden-i';
        let destination = null;
        let inventory = {
            food: 0,
            medicine: 0,
            weapons: 0,
            electronics: 0,
            ore: 0,
            artifacts: 0,
            exotic_animals: 0
        };
        let bankInventory = {
            food: 0,
            medicine: 0,
            arms: 0,
            electronics: 0,
            ore: 0,
            artifacts: 0,
            exotic_animals: 0
        };
        let messageLog = [];
        let enemyShip = null;
        let enemyType = 'lux';
        let debt = 0;
        let daysPassed = 0;
        const planetNames = {
            'eden-i': 'Eden I',
            'erebus-iv': 'Erebus IV',
            'rigel-ix': 'Rigel IX',
            'vestus-vi': 'Vestus VI',
            'scipio-xii': 'Scipio XII',
            'glorzo': 'Glorzo'
        };
        const planets = {
            'eden-i': { food: 50, medicine: 100, arms: 200, electronics: 150, ore: 80, artifacts: 300, exotic_animals: 300 },
            'erebus-iv': { food: 70, medicine: 120, arms: 180, electronics: 130, ore: 60, artifacts: 280, exotic_animals: 300 },
            'rigel-ix': { food: 90, medicine: 80, arms: 150, electronics: 200, ore: 40, artifacts: 350, exotic_animals: 300 },
            'vestus-vi': { food: 60, medicine: 90, arms: 250, electronics: 170, ore: 100, artifacts: 320, exotic_animals: 500 },
            'scipio-xii': { food: 120, medicine: 150, arms: 160, electronics: 180, ore: 70, artifacts: 290, exotic_animals: 300 },
            'glorzo': { food: 80, medicine: 110, arms: 220, electronics: 140, ore: 90, artifacts: 200, exotic_animals: 300 }
        };
        const loadouts = [
            {
                name: 'Trader',
                credits: 2000,
                cargo: 80,
                weapons: 5,
                hull: 80,
                inventory: { food: 20, medicine: 10, arms: 0, electronics: 15, ore: 10, artifacts: 0, exotic_animals: 0 }
            },
            {
                name: 'Smuggler',
                credits: 1500,
                cargo: 50,
                weapons: 15,
                hull: 100,
                inventory: { food: 5, medicine: 5, arms: 10, electronics: 5, ore: 0, artifacts: 3, exotic_animals: 0 }
            },
            {
                name: 'Mercenary',
                credits: 1000,
                cargo: 40,
                weapons: 25,
                hull: 120,
                inventory: { food: 10, medicine: 5, arms: 15, electronics: 5, ore: 0, artifacts: 0, exotic_animals: 0 }
            },
            {
                name: 'Debtor',
                credits: 5000,
                cargo: 60,
                weapons: 10,
                hull: 90,
                debt: 8000,
                inventory: { food: 15, medicine: 10, arms: 5, electronics: 10, ore: 5, artifacts: 1, exotic_animals: 0 }
            }
        ];
        function startGame() {
            gameState = 'loadout';
            render();
        }
        function selectLoadout(idx) {
            const loadout = loadouts[idx];
            ship = {
                hull: loadout.hull,
                maxHull: loadout.hull,
                cargo: loadout.cargo,
                maxCargo: loadout.cargo,
                credits: loadout.credits,
                weapons: loadout.weapons
            };
            inventory = { ...loadout.inventory };
            debt = loadout.debt || 0;
            gameState = 'trading';
            render();
        }
        function getUsedCargo() {
            return Object.values(inventory).reduce((sum, qty) => sum + qty, 0);
        }
        function buyItem(item, quantity = 1) {
            const price = planets[currentPlanet][item] * quantity;
            const availableCargo = ship.maxCargo - getUsedCargo();
           
            if (ship.credits >= price && availableCargo >= quantity) {
                ship.credits -= price;
                inventory[item] += quantity;
                render();
            }
        }
        function sellItem(item, quantity = 1) {
            if (inventory[item] >= quantity) {
                const price = Math.floor(planets[currentPlanet][item] * 0.8) * quantity;
                ship.credits += price;
                inventory[item] -= quantity;
                render();
            }
        }
        function depositItem(item, quantity = 1) {
            if (inventory[item] >= quantity) {
                inventory[item] -= quantity;
                bankInventory[item] += quantity;
                render();
            }
        }
        function withdrawItem(item, quantity = 1) {
            if (bankInventory[item] >= quantity && getUsedCargo() + quantity <= ship.maxCargo) {
                bankInventory[item] -= quantity;
                inventory[item] += quantity;
                render();
            }
        }
        function travelTo(planet) {
            destination = planet;
            daysPassed += 1;
           
            const hasContraband = inventory.weapons > 0 || inventory.artifacts > 0;
            const encounterChance = hasContraband ? 0.3 : 0.2;
           
            if (Math.random() < encounterChance) {
                const scale = Math.floor(ship.credits / 2000);
                let baseHull = 60 + Math.floor(Math.random() * 40) + (scale * 10);
                let baseWeapons = 8 + Math.floor(Math.random() * 10) + (scale * 2);
                if (Math.random() < 0.15) {
                    baseHull = 100 + Math.floor(Math.random() * 100) + (scale * 20);
                    baseWeapons = 15 + Math.floor(Math.random() * 15) + (scale * 3);
                    enemyType = 'tiamat';
                    messageLog = ['Ambushed by Tiamat the space beast!'];
                } else {
                    enemyType = 'lux';
                    messageLog = ['Lux Patrol spotted!'];
                }
                enemyShip = {
                    hull: baseHull,
                    weapons: baseWeapons
                };
                gameState = 'combat';
            } else {
                let arrivalPlanet = planet;
                if (Math.random() < 0.15) {
                    const otherPlanets = Object.keys(planets).filter(p => p !== currentPlanet && p !== planet);
                    arrivalPlanet = otherPlanets[Math.floor(Math.random() * otherPlanets.length)];
                    messageLog.push(`Navigation error due to solar storm! Arrived at ${planetNames[arrivalPlanet]} instead.`);
                }
                currentPlanet = arrivalPlanet;
                destination = null;
               
                if (Math.random() < 0.1) {
                    inventory.exotic_animals += 1;
                    messageLog.push('Found an exotic animal!');
                }
               
                if (arrivalPlanet === 'glorzo') {
                    const damage = Math.floor(Math.random() * 20) + 10;
                    ship.hull -= damage;
                    messageLog.push(`Hull damaged by Glorzo radiation! -${damage} hull`);
                    if (ship.hull <= 0) {
                        messageLog.push('Your ship is destroyed! Game Over');
                        setTimeout(resetGame, 3000);
                    }
                }
               
                if (debt > 0 && daysPassed % 10 === 0) {
                    const interest = Math.floor(debt * 0.1);
                    debt += interest;
                    messageLog.push(`Loan shark demands payment! Debt increased by $${interest}`);
                }
                gameState = 'trading';
            }
            render();
        }
        function attack() {
            if (!enemyShip) return;
           
            const playerDamage = ship.weapons + Math.floor(Math.random() * 15);
            const enemyDamage = enemyShip.weapons + Math.floor(Math.random() * 12);
           
            const newEnemyHull = enemyShip.hull - playerDamage;
            const newPlayerHull = ship.hull - enemyDamage;
           
            let log = [...messageLog];
            log.push(`You deal ${playerDamage} damage!`);
           
            if (newEnemyHull <= 0) {
                log.push('Enemy destroyed! +500 credits');
                ship.hull = newPlayerHull;
                ship.credits += 500;
                enemyShip = null;
                messageLog = [];
                currentPlanet = destination;
                destination = null;
                gameState = 'trading';
            } else {
                log.push(`Enemy deals ${enemyDamage} damage!`);
                enemyShip.hull = newEnemyHull;
               
                if (newPlayerHull <= 0) {
                    log.push('Your ship is destroyed! Game Over');
                    ship.hull = 0;
                    setTimeout(() => {
                        gameState = 'title';
                        resetGame();
                    }, 3000);
                } else {
                    ship.hull = newPlayerHull;
                }
            }
           
            messageLog = log.slice(-6);
            render();
        }
        function evade() {
            if (Math.random() < 0.5) {
                messageLog.push('Successfully evaded!');
                enemyShip = null;
                messageLog = [];
                currentPlanet = destination;
                destination = null;
                gameState = 'trading';
            } else {
                const enemyDamage = enemyShip.weapons + Math.floor(Math.random() * 12);
                const newPlayerHull = ship.hull - enemyDamage;
               
                messageLog = [...messageLog, `Evade failed! Took ${enemyDamage} damage`].slice(-6);
               
                if (newPlayerHull <= 0) {
                    ship.hull = 0;
                    setTimeout(() => {
                        gameState = 'title';
                        resetGame();
                    }, 3000);
                } else {
                    ship.hull = newPlayerHull;
                }
            }
            render();
        }
        function bribe() {
            const bribeAmount = Math.max(100, Math.floor(ship.credits * 0.1));
           
            if (ship.credits >= bribeAmount) {
                if (Math.random() < 0.7) {
                    messageLog.push(`Bribe accepted! Paid $${bribeAmount}`);
                    ship.credits -= bribeAmount;
                    enemyShip = null;
                    messageLog = [];
                    currentPlanet = destination;
                    destination = null;
                    gameState = 'trading';
                } else {
                    messageLog = [...messageLog, `Bribe rejected! They're attacking!`].slice(-6);
                }
            }
            render();
        }
        function upgradeShip(type) {
            const costs = {
                cargo: 500,
                weapons: 800,
                hull: 600
            };
           
            if (ship.credits >= costs[type]) {
                if (type === 'cargo') {
                    ship.credits -= costs[type];
                    ship.maxCargo += 20;
                } else if (type === 'weapons') {
                    ship.credits -= costs[type];
                    ship.weapons += 5;
                } else if (type === 'hull') {
                    ship.credits -= costs[type];
                    ship.maxHull += 20;
                    ship.hull += 20;
                }
                render();
            }
        }
        function repairShip() {
            const repairCost = (ship.maxHull - ship.hull) * 2;
            if (ship.credits >= repairCost && ship.hull < ship.maxHull) {
                ship.credits -= repairCost;
                ship.hull = ship.maxHull;
                render();
            }
        }
        function borrowMoney(amount) {
            ship.credits += amount;
            debt += amount;
            render();
        }
        function repayDebt(amount) {
            if (ship.credits >= amount && debt >= amount) {
                ship.credits -= amount;
                debt -= amount;
                render();
            }
        }
        function resetGame() {
            ship = {
                hull: 100,
                maxHull: 100,
                cargo: 50,
                maxCargo: 50,
                credits: 1000,
                weapons: 10
            };
            inventory = {
                food: 0,
                medicine: 0,
                arms: 0,
                electronics: 0,
                ore: 0,
                artifacts: 0,
                exotic_animals: 0
            };
            bankInventory = {
                food: 0,
                medicine: 0,
                arms: 0,
                electronics: 0,
                ore: 0,
                artifacts: 0,
                exotic_animals: 0
            };
            debt = 0;
            daysPassed = 0;
            currentPlanet = 'eden-i';
            messageLog = [];
            render();
        }
        function renderLuxPatrolSprite() {
            return `
                <div class="flex justify-center items-center py-4">
                    <svg width="120" height="80" viewBox="0 0 120 80" class="animate-pulse">
                        <polygon points="60,10 90,40 60,50 30,40" fill="#ff0000" stroke="#ff6666" stroke-width="2"/>
                        <polygon points="30,40 10,30 10,50" fill="#cc0000" stroke="#ff6666" stroke-width="1"/>
                        <polygon points="90,40 110,30 110,50" fill="#cc0000" stroke="#ff6666" stroke-width="1"/>
                        <circle cx="60" cy="35" r="8" fill="#ffff00" stroke="#ffffff" stroke-width="1"/>
                        <circle cx="60" cy="50" r="5" fill="#ff00ff" opacity="0.8"/>
                        <circle cx="60" cy="50" r="3" fill="#ffffff"/>
                        <line x1="50" y1="40" x2="40" y2="45" stroke="#ff6666" stroke-width="2"/>
                        <line x1="70" y1="40" x2="80" y2="45" stroke="#ff6666" stroke-width="2"/>
                    </svg>
                </div>
            `;
        }
        function renderTiamatSprite() {
            return `
                <div class="flex justify-center items-center py-4">
                    <svg width="120" height="80" viewBox="0 0 120 80" class="animate-pulse">
                        <circle cx="60" cy="40" r="30" fill="#800080" stroke="#ff00ff" stroke-width="2"/>
                        <path d="M30,40 Q0,20 10,0" stroke="#800080" stroke-width="5" fill="none"/>
                        <path d="M90,40 Q120,20 110,0" stroke="#800080" stroke-width="5" fill="none"/>
                        <path d="M40,60 Q20,80 10,70" stroke="#800080" stroke-width="5" fill="none"/>
                        <path d="M80,60 Q100,80 110,70" stroke="#800080" stroke-width="5" fill="none"/>
                        <path d="M50,50 Q30,70 40,80" stroke="#800080" stroke-width="5" fill="none"/>
                        <path d="M70,50 Q90,70 80,80" stroke="#800080" stroke-width="5" fill="none"/>
                        <circle cx="50" cy="30" r="5" fill="white"/>
                        <circle cx="70" cy="30" r="5" fill="white"/>
                    </svg>
                </div>
            `;
        }
        function render() {
            let html = '';
            if (gameState === 'title') {
                html = `
                    <div class="title-screen">
                        <div class="space-y-8">
                            <div class="text-4xl mb-4 animate-pulse">═══ BLOCKADE RUNNER ═══</div>
                            <div class="text-2xl">by Patrick McDonald and Claude</div>
                            <div class="text-xl mt-8">
                                <div>Trade goods across the galaxy</div>
                                <div>Fight Lux Patrols</div>
                                <div>Build your fortune</div>
                            </div>
                            <button
                                onclick="startGame()"
                                class="mt-12 px-6 py-3 text-xl border-2 border-cyan-400 hover-bg-cyan-400 transition-all"
                            >
                                [ START GAME ]
                            </button>
                        </div>
                    </div>
                `;
            } else if (gameState === 'loadout') {
                html = `
                    <div class="max-w-4xl">
                        <h1 class="text-4xl font-bold mb-6 text-center">═══ SELECT YOUR LOADOUT ═══</h1>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${loadouts.map((loadout, idx) => `
                                <div class="border-2 border-cyan-400 p-4">
                                    <div class="text-2xl mb-4 text-center">${loadout.name}</div>
                                    <div class="space-y-1 text-sm mb-4">
                                        <div>Credits: $${loadout.credits}</div>
                                        <div>Hull: ${loadout.hull}</div>
                                        <div>Cargo: ${loadout.cargo}</div>
                                        <div>Weapons: ${loadout.weapons}</div>
                                        ${loadout.debt ? `<div class="text-red-400">Debt: $${loadout.debt}</div>` : ''}
                                        <div class="mt-2 text-xs">
                                            Starting cargo: ${Object.entries(loadout.inventory)
                                                .filter(([_, qty]) => qty > 0)
                                                .map(([item, qty]) => `${item}(${qty})`)
                                                .join(', ')}
                                        </div>
                                    </div>
                                    <button
                                        onclick="selectLoadout(${idx})"
                                        class="w-full py-2 border border-cyan-400 hover-bg-cyan-400 transition-all"
                                    >
                                        [ SELECT ]
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (gameState === 'combat') {
                html = `
                    <div class="max-w-4xl">
                        <h1 class="text-4xl font-bold mb-6">═══ COMBAT ═══</h1>
                        ${enemyType === 'lux' ? renderLuxPatrolSprite() : renderTiamatSprite()}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div class="border-2 border-cyan-400 p-4">
                                <div class="text-2xl mb-4">YOUR SHIP</div>
                                <div>Hull: ${ship.hull}/${ship.maxHull}</div>
                                <div>Weapons: ${ship.weapons}</div>
                            </div>
                            <div class="border-2 border-red-500 p-4">
                                <div class="text-2xl mb-4 text-red-500">${enemyType.toUpperCase()} ENEMY</div>
                                <div class="text-red-500">Hull: ${enemyShip ? enemyShip.hull : 0}</div>
                                <div class="text-red-500">Weapons: ${enemyShip ? enemyShip.weapons : 0}</div>
                            </div>
                        </div>
                        <div class="border-2 border-cyan-400 p-4 mb-8 h-48 overflow-y-auto">
                            <div class="text-xl mb-2">COMBAT LOG:</div>
                            ${messageLog.map(log => `<div class="mb-1 text-base">&gt; ${log}</div>`).join('')}
                        </div>
                        ${ship.hull > 0 && enemyShip ? `
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <button
                                    onclick="attack()"
                                    class="py-4 text-xl border-2 border-cyan-400 hover-bg-cyan-400 transition-all"
                                >
                                    [ ATTACK ]
                                </button>
                                <button
                                    onclick="bribe()"
                                    class="py-4 text-xl border-2 border-cyan-400 bg-white text-black hover-bg-cyan-400 transition-all"
                                    ${ship.credits < 100 ? 'disabled' : ''}
                                >
                                    [ BRIBE ]
                                </button>
                                <button
                                    onclick="evade()"
                                    class="py-4 text-xl border-2 border-green-400 text-green-400 hover-bg-green-400 transition-all"
                                >
                                    [ EVADE ]
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            } else {
                html = `
                    <div class="max-w-6xl">
                        <h1 class="text-4xl font-bold mb-6">═══ ${planetNames[currentPlanet].toUpperCase()} ═══</h1>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                            <div class="border-2 border-cyan-400 p-4">
                                <div class="text-xl mb-2">SHIP STATUS</div>
                                <div class="text-base">Hull: ${ship.hull}/${ship.maxHull}</div>
                                <div class="text-base">Cargo: ${getUsedCargo()}/${ship.maxCargo}</div>
                                <div class="text-base">Weapons: ${ship.weapons}</div>
                                <div class="text-base">Credits: $${ship.credits}</div>
                                ${debt > 0 ? `<div class="text-base text-red-400">Debt: $${debt}</div>` : ''}
                                <div class="text-xs text-gray-400 mt-2">Day ${daysPassed}</div>
                            </div>
                            <div class="border-2 border-cyan-400 p-4 md:col-span-2">
                                <div class="text-xl mb-2">INVENTORY</div>
                                <div class="grid grid-cols-2 gap-2 text-base">
                                    ${Object.entries(inventory).map(([item, qty]) => `
                                        <div>${item}: ${qty}</div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ${messageLog.length > 0 ? `
                            <div class="border-2 border-cyan-400 p-4 mb-8">
                                <div class="text-xl mb-2">MESSAGES:</div>
                                ${messageLog.map(log => `<div class="mb-1 text-base">&gt; ${log}</div>`).join('')}
                            </div>
                        ` : ''}
                        ${currentPlanet === 'eden-i' ? `
                            <div class="border-2 border-cyan-400 p-4 mb-4">
                                <div class="text-2xl mb-4">SHIP MARKET</div>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <button
                                        onclick="upgradeShip('cargo')"
                                        class="py-2 px-4 border border-cyan-400 hover-bg-cyan-400 text-base"
                                        ${ship.credits < 500 ? 'disabled' : ''}
                                    >
                                        Cargo +20 ($500)
                                    </button>
                                    <button
                                        onclick="upgradeShip('hull')"
                                        class="py-2 px-4 border border-cyan-400 hover-bg-cyan-400 text-base"
                                        ${ship.credits < 600 ? 'disabled' : ''}
                                    >
                                        Hull +20 ($600)
                                    </button>
                                    <button
                                        onclick="repairShip()"
                                        class="py-2 px-4 border border-cyan-400 bg-white text-black hover-bg-cyan-400 text-base"
                                        ${ship.hull >= ship.maxHull || ship.credits < (ship.maxHull - ship.hull) * 2 ? 'disabled' : ''}
                                    >
                                        Repair ($${(ship.maxHull - ship.hull) * 2})
                                    </button>
                                </div>
                            </div>
                            <div class="border-2 border-cyan-400 p-4 mb-4">
                                <div class="text-2xl mb-4">BANK STORAGE</div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-xl mb-2">Bank Inventory</div>
                                        <div class="grid grid-cols-2 gap-2 text-base">
                                            ${Object.entries(bankInventory).map(([item, qty]) => `
                                                <div>${item}: ${qty}</div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    <div>
                                        <div class="text-xl mb-2">Actions</div>
                                        ${Object.keys(bankInventory).map(item => `
                                            <div class="mb-3 pb-3 border-b border-cyan-400 border-opacity-30">
                                                <div class="flex justify-between items-center mb-2">
                                                    <span class="text-base font-bold">${item}</span>
                                                </div>
                                                <div class="grid grid-cols-2 gap-2">
                                                    <button
                                                        onclick="depositItem('${item}', 1)"
                                                        class="px-2 py-1 text-xs border border-cyan-400 hover-bg-cyan-400"
                                                        ${inventory[item] < 1 ? 'disabled' : ''}
                                                    >
                                                        Deposit 1
                                                    </button>
                                                    <button
                                                        onclick="withdrawItem('${item}', 1)"
                                                        class="px-2 py-1 text-xs border border-cyan-400 bg-white text-black hover-bg-cyan-400"
                                                        ${bankInventory[item] < 1 || getUsedCargo() + 1 > ship.maxCargo ? 'disabled' : ''}
                                                    >
                                                        Withdraw 1
                                                    </button>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                        ${currentPlanet === 'rigel-ix' ? `
                            <div class="border-2 border-cyan-400 p-4 mb-4">
                                <div class="text-2xl mb-4">WEAPON MARKET</div>
                                <button
                                    onclick="upgradeShip('weapons')"
                                    class="py-2 px-4 border border-cyan-400 hover-bg-cyan-400 text-base"
                                    ${ship.credits < 800 ? 'disabled' : ''}
                                >
                                    Weapons +5 ($800)
                                </button>
                            </div>
                        ` : ''}
                        ${currentPlanet === 'erebus-iv' ? `
                            <div class="border-2 border-red-400 p-4 mb-4">
                                <div class="text-2xl mb-4 text-red-400">LOAN SHARK</div>
                                <div class="text-sm mb-4">Borrow money at 10% interest every 10 days</div>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                    <button
                                        onclick="borrowMoney(1000)"
                                        class="py-2 px-4 border border-red-400 text-red-400 hover-bg-red-400 text-sm"
                                    >
                                        Borrow $1000
                                    </button>
                                    <button
                                        onclick="borrowMoney(5000)"
                                        class="py-2 px-4 border border-red-400 text-red-400 hover-bg-red-400 text-sm"
                                    >
                                        Borrow $5000
                                    </button>
                                    <button
                                        onclick="repayDebt(1000)"
                                        class="py-2 px-4 border border-green-400 text-green-400 hover-bg-green-400 text-sm"
                                        ${debt < 1000 || ship.credits < 1000 ? 'disabled' : ''}
                                    >
                                        Repay $1000
                                    </button>
                                    <button
                                        onclick="repayDebt(${debt})"
                                        class="py-2 px-4 border border-green-400 text-green-400 hover-bg-green-400 text-sm"
                                        ${debt === 0 || ship.credits < debt ? 'disabled' : ''}
                                    >
                                        Repay All
                                    </button>
                                </div>
                            </div>
                        ` : ''}
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="border-2 border-cyan-400 p-4">
                                <div class="text-2xl mb-4">MARKET</div>
                                <div>
                                    ${Object.entries(planets[currentPlanet]).filter(([item]) => item !== 'exotic_animals' || currentPlanet === 'vestus-vi').map(([item, price]) => `
                                        <div key="${item}" class="mb-3 pb-3 border-b border-cyan-400 border-opacity-30">
                                            <div class="flex justify-between items-center mb-2">
                                                <span class="text-base font-bold">${item}: $${price}</span>
                                                <span class="text-xs text-gray-400">Stock: ${inventory[item]}</span>
                                            </div>
                                            <div class="grid grid-cols-4 gap-2 mb-1">
                                                <button
                                                    onclick="buyItem('${item}', 1)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 hover-bg-cyan-400"
                                                    ${ship.credits < price * 1 || getUsedCargo() + 1 > ship.maxCargo ? 'disabled' : ''}
                                                >
                                                    BUY 1
                                                </button>
                                                <button
                                                    onclick="buyItem('${item}', 5)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 hover-bg-cyan-400"
                                                    ${ship.credits < price * 5 || getUsedCargo() + 5 > ship.maxCargo ? 'disabled' : ''}
                                                >
                                                    BUY 5
                                                </button>
                                                <button
                                                    onclick="buyItem('${item}', 10)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 hover-bg-cyan-400"
                                                    ${ship.credits < price * 10 || getUsedCargo() + 10 > ship.maxCargo ? 'disabled' : ''}
                                                >
                                                    BUY 10
                                                </button>
                                                <button
                                                    onclick="buyItem('${item}', 50)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 hover-bg-cyan-400"
                                                    ${ship.credits < price * 50 || getUsedCargo() + 50 > ship.maxCargo ? 'disabled' : ''}
                                                >
                                                    BUY 50
                                                </button>
                                            </div>
                                            <div class="grid grid-cols-4 gap-2">
                                                <button
                                                    onclick="sellItem('${item}', 1)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 bg-white text-black hover-bg-cyan-400"
                                                    ${inventory[item] < 1 ? 'disabled' : ''}
                                                >
                                                    SELL 1
                                                </button>
                                                <button
                                                    onclick="sellItem('${item}', 5)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 bg-white text-black hover-bg-cyan-400"
                                                    ${inventory[item] < 5 ? 'disabled' : ''}
                                                >
                                                    SELL 5
                                                </button>
                                                <button
                                                    onclick="sellItem('${item}', 10)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 bg-white text-black hover-bg-cyan-400"
                                                    ${inventory[item] < 10 ? 'disabled' : ''}
                                                >
                                                    SELL 10
                                                </button>
                                                <button
                                                    onclick="sellItem('${item}', 50)"
                                                    class="px-2 py-1 text-xs border border-cyan-400 bg-white text-black hover-bg-cyan-400"
                                                    ${inventory[item] < 50 ? 'disabled' : ''}
                                                >
                                                    SELL 50
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="border-2 border-cyan-400 p-4">
                                <div class="text-2xl mb-4">TRAVEL</div>
                                ${Object.keys(planets).map(planet => planet !== currentPlanet ? `
                                    <button
                                        onclick="travelTo('${planet}')"
                                        class="w-full mb-2 py-2 text-base border border-cyan-400 hover-bg-cyan-400 text-left pl-4"
                                    >
                                        &gt; ${planetNames[planet]}
                                    </button>
                                ` : '').join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
            document.getElementById('app').innerHTML = html;
        }
        render();
    </script>
</body>
</html>
