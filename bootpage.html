<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Boot Page â€” BUU</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
--bg:#001a1a; --fg:#00ffff; --accent:#ffcc00; --border:#00cccc; --panel-bg:#002b2b;
--text-gray:#e6f7f7; --muted:#00aaaa; --online:#00ff9d; --yahoo-blue:#1e73be; --yahoo-dark:#0961a6;
}
html,body{margin:0;height:100%;font-family:'Roboto Mono',monospace;background:var(--bg);color:var(--fg);overflow:auto}
body{background:url('https://wallpapercave.com/wp/wp4468245.jpg') center/cover no-repeat}
@keyframes glitch{2%,64%{transform:translate(2px,0) skew(5deg);}4%,60%{transform:translate(-2px,0) skew(-5deg);}62%{transform:translate(0,0) skew(3deg);}}
.glitch{animation:glitch 1s linear infinite;}
.glitch-update{animation:glitch 0.5s linear;}
#bootOverlay{position:fixed;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.9),rgba(0,0,0,0.95));color:var(--fg);z-index:99998;display:flex;align-items:center;justify-content:center;flex-direction:column;font-family:'Roboto Mono',monospace}
#bootPanel{width:92%;max-width:820px;background:var(--panel-bg);border:4px solid var(--border);padding:18px;box-shadow:0 0 30px rgba(0,255,255,0.06)}
#bootLog{line-height:1.6;white-space:pre-wrap;margin-bottom:12px;font-size:13px;color:var(--text-gray)}
#bootPrompt{color:var(--accent);margin-bottom:6px;animation:blink 1s step-end infinite;}
@keyframes blink{50%{opacity:0;}}
#bootInputs{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
#bootInput{background:#001f1f;border:2px solid var(--border);color:var(--fg);padding:8px;width:48%;min-width:160px;font-family:monospace}
#bootChannel{background:#001f1f;border:2px solid var(--border);color:var(--fg);padding:8px;font-family:monospace;width:48%;min-width:160px}
#bootBtn{background:var(--accent);border:2px solid #000;color:#000;padding:8px 14px;cursor:pointer;font-weight:700}
#bootBanner{margin-top:10px;background:rgba(0,0,0,0.35);padding:8px;border-radius:4px;color:var(--fg);font-size:12px}
#bootBroadcast{animation:glitch 3s infinite alternate;}
#bootStatus{margin-top:8px;color:var(--accent)}
.small{font-size:11px;color:var(--muted)}
</style>
</head>
<body>
<div id="bootOverlay">
<div id="bootPanel">
<div id="bootLog" class="small"></div>
<div id="bootPrompt">> ENTER HANDLE & SELECT SERVER</div>
<div id="bootInputs">
<input id="bootInput" type="text" maxlength="30" placeholder="//YourHandle (required)">
<select id="bootChannel">
<option value="sam">//Sam</option>
<option value="exuro">//Exuro</option>
<option value="nero">//Nero</option>
<option value="nora">//Nora</option>
<option value="loktal">//Loktal</option>
</select>
<button id="bootBtn">ENTER NETWORK</button>
</div>
<div id="bootStatus" class="small"></div>
<div id="bootBanner" class="small">System Broadcast: <span id="bootBroadcast">Timeline stability.. 84%</span></div>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {apiKey:"AIzaSyBGdiOrMFolYWNMvckE4fbp_VhWA80BaII",authDomain:"before-us-universe.firebaseapp.com",databaseURL:"https://before-us-universe-default-rtdb.firebaseio.com",projectId:"before-us-universe",storageBucket:"before-us-universe.firebasestorage.app",messagingSenderId:"477103463228",appId:"1:477103463228:web:01b53b6b29cb9d54315c39"};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

const bootLog = document.getElementById('bootLog');
const bootInput = document.getElementById('bootInput');
const bootBtn = document.getElementById('bootBtn');
const bootStatus = document.getElementById('bootStatus');
const bootBroadcast = document.getElementById('bootBroadcast');
const bootChannel = document.getElementById('bootChannel');

let uid = null, myHandle = null, currentChannel = 'exuro';

const bootLines = [
"C:\\> INITIALIZING BEFORE US UNIVERSE...",
"C:\\> Loading kernel.............[ONLINE]",
"C:\\> Checking Ra'Norric link....[ONLINE]",
"C:\\> Accessing Pre-Universe Archives... [GRANTED]",
"C:\\> Loading Melphia's Game Protocols... [ACTIVE]",
"C:\\> Detecting Temporal Anomalies... [STABLE]",
"C:\\> MEMORY CHECK PASSED",
"C:\\> DISK VERIFIED",
"C:\\> NETWORK ACTIVE",
"C:\\> System is .....[ONLINE]",
"C:\\> Ready for authentication..."
];


    // Increment visitor and hit counters
    const visitorsRef = ref(db, 'visitors/count');
    get(visitorsRef).then(snap => {
      let count = snap.val() || 0;
      count++;
      set(visitorsRef, count);
    }).catch(() => {});

    const hitsRef = ref(db, 'hits/count');
    get(hitsRef).then(snap => {
      let count = snap.val() || 0;
      count++;
      set(hitsRef, count);
    }).catch(() => {});

    // Log the visitor with their handle
    const logRef = push(ref(db, 'visitors/logs'));
    set(logRef, {ts: Date.now(), handle: raw});

    myHandle = raw;
    currentChannel = bootChannel.value || 'exuro';

    // Save user profile
    setTimeout(() => {
      set(ref(db, `users/${uid}`), {name: myHandle, uid, firstSeen: Date.now()}).catch(e => {
        console.error('Profile save failed: ' + e.message);
      });
    }, 500);

    bootStatus.textContent = `Welcome, ${myHandle}!`;

    setTimeout(() => {
      // Send data to parent and hide iframe
      window.parent.postMessage({
        type: 'bootComplete',
        handle: myHandle,
        channel: currentChannel,
        uid: uid
      }, '*');
    }, 900);

  } catch(e) {
    bootStatus.textContent = "Failed to enter network: " + e.message;
    console.error('Authentication failed: ' + e.message);
  }
});

setInterval(() => {
  const p = 80 + Math.floor(Math.random() * 11);
  bootBroadcast.textContent = `Timeline stability.. ${p}%`;
  bootBroadcast.classList.add('glitch-update');
  setTimeout(() => bootBroadcast.classList.remove('glitch-update'), 500);
}, 5000);
</script>
</body>
</html>
