<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Boot Page â€” BUU</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
--bg:#001a1a; --fg:#00ffff; --accent:#ffcc00; --border:#00cccc; --panel-bg:#002b2b;
--text-gray:#e6f7f7; --muted:#00aaaa; --online:#00ff9d; --yahoo-blue:#1e73be; --yahoo-dark:#0961a6;
}
html,body{margin:0;height:100%;font-family:'Roboto Mono',monospace;background:var(--bg);color:var(--fg);overflow:auto}
body{background:url('https://wallpapercave.com/wp/wp4468245.jpg') center/cover no-repeat}
#bootOverlay{position:fixed;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.9),rgba(0,0,0,0.95));color:var(--fg);z-index:99998;display:flex;align-items:center;justify-content:center;flex-direction:column;font-family:'Roboto Mono',monospace}
#bootPanel{width:92%;max-width:820px;background:var(--panel-bg);border:4px solid var(--border);padding:18px;box-shadow:0 0 30px rgba(0,255,255,0.06)}
#bootLog{line-height:1.6;white-space:pre-wrap;margin-bottom:12px;font-size:13px;color:var(--text-gray)}
#bootPrompt{color:var(--accent);margin-bottom:6px;animation:blink 1s step-end infinite;}
@keyframes blink{50%{opacity:0;}}
#bootInputs{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
#bootInput{background:#001f1f;border:2px solid var(--border);color:var(--fg);padding:8px;width:48%;min-width:160px;font-family:monospace}
#bootChannel{background:#001f1f;border:2px solid var(--border);color:var(--fg);padding:8px;font-family:monospace;width:48%;min-width:160px}
#bootBtn{background:var(--accent);border:2px solid #000;color:#000;padding:8px 14px;cursor:pointer;font-weight:700}
#bootBanner{margin-top:10px;background:rgba(0,0,0,0.35);padding:8px;border-radius:4px;color:var(--fg);font-size:12px}
#bootBroadcast{animation:glitch 3s infinite alternate;}
</style>
</head>
<body>
<div id="bootOverlay">
<div id="bootPanel">
<div id="bootLog" class="small"></div>
<div id="bootPrompt">> ENTER HANDLE & SELECT SERVER</div>
<div id="bootInputs">
<input id="bootInput" type="text" maxlength="30" placeholder="//YourHandle (required)">
<select id="bootChannel">
<option value="sam">//Sam</option>
<option value="exuro">//Exuro</option>
<option value="nero">//Nero</option>
<option value="nora">//Nora</option>
<option value="loktal">//Loktal</option>
</select>
<button id="bootBtn">ENTER NETWORK</button>
</div>
<div id="bootStatus" class="small"></div>
<div id="bootBanner" class="small">System Broadcast: <span id="bootBroadcast">Timeline stability.. 84%</span></div>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
import { getAuth, signInAnonymously, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {apiKey:"AIzaSyBGdiOrMFolYWNMvckE4fbp_VhWA80BaII",authDomain:"before-us-universe.firebaseapp.com",databaseURL:"https://before-us-universe-default-rtdb.firebaseio.com",projectId:"before-us-universe",storageBucket:"before-us-universe.firebasestorage.app",messagingSenderId:"477103463228",appId:"1:477103463228:web:01b53b6b29cb9d54315c39"};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

setPersistence(auth, browserLocalPersistence);

const bootLog = document.getElementById('bootLog');
const bootInput = document.getElementById('bootInput');
const bootBtn = document.getElementById('bootBtn');
const bootStatus = document.getElementById('bootStatus');
const bootBroadcast = document.getElementById('bootBroadcast');
const bootChannel = document.getElementById('bootChannel');

let uid = null, myHandle = null, currentChannel = 'exuro';

const bootLines = [
"C:\\> INITIALIZING BEFORE US UNIVERSE...",
"C:\\> Loading kernel.............[ONLINE]",
"C:\\> Checking Ra'Norric link....[ONLINE]",
"C:\\> Accessing Pre-Universe Archives... [GRANTED]",
"C:\\> Loading Melphia's Game Protocols... [ACTIVE]",
"C:\\> Detecting Temporal Anomalies... [STABLE]",
"C:\\> MEMORY CHECK PASSED",
"C:\\> DISK VERIFIED",
"C:\\> NETWORK ACTIVE",
"C:\\> System is .....[ONLINE]",
"C:\\> Ready for authentication..."
];

let lineIdx = 0;
function typeBootLine(){
if(lineIdx < bootLines.length){
bootLog.textContent += bootLines[lineIdx] + "\n";
lineIdx++;
setTimeout(typeBootLine, 240 + Math.random()*360);
}
}
typeBootLine();

bootBtn.addEventListener('click', async () => {
  let raw = bootInput.value.trim().replace(/[^\w\-]/g,'').slice(0,30);
  if(!raw){
    bootStatus.textContent = "Please enter a handle.";
    return;
  }

  bootStatus.textContent = "Entering network...";

  await setPersistence(auth, browserLocalPersistence);
  const credential = await signInAnonymously(auth);
  uid = credential.user.uid;

  myHandle = raw;
  currentChannel = bootChannel.value || 'exuro';

  localStorage.setItem('buu_handle', myHandle);
  localStorage.setItem('buu_channel', currentChannel);
  localStorage.setItem('buu_logged', 'yes');

  // your visitor/hit counting code here (unchanged)

  bootStatus.textContent = `Welcome, ${myHandle}!`;

  setTimeout(() => {
    window.parent.postMessage({
      type: 'bootComplete',
      handle: myHandle,
      channel: currentChannel,
      uid: uid
    }, '*');
  }, 900);
});

setInterval(() => {
const p = 80 + Math.floor(Math.random() * 11);
bootBroadcast.textContent = `Timeline stability.. ${p}%`;
bootBroadcast.classList.add('glitch-update');
setTimeout(() => bootBroadcast.classList.remove('glitch-update'), 500);
}, 5000);
</script>
</body>
</html>
